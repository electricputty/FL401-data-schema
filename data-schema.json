{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "FL401 Data Schema: Version 1.0",
    "type": "object",
    "definitions": {
        "applicantAgeBracket": {
            "type": "string",
            "enum": [
                "eighteenOrOlder",
                "sixteenToEighteen",
                "underSixteen"
            ]
        },
        "applicationCover": {
            "type": "string",
            "enum": [
                "applicantOnly",
                "applicantAndChildren"
            ]
        },
        "behaviourTowardsApplicant": {
            "type": "string",
            "enum": [
                "beingViolentOrThreatening",
                "harrasingOrIntimidating",
                "publishingAboutApplicant",
                "contactingApplicant",
                "damagingPossessions",
                "damagingHome",
                "enteringHome",
                "comingNearHome",
                "comingNearWork"
            ]
        },
        "behaviourTowardsChildren": {
            "type": "string",
            "enum": [
                "beingViolentOrThreatening",
                "harrasingOrIntimidating",
                "publishingAboutChildren",
                "contactingDirectly",
                "goingNearSchoolNursery"
            ]
        },
        "childAtAddress": {
            "type": "object",
            "properties": {
                "fullName": {
                    "type": "string"
                },
                "age": {
                    "type": "integer"
                }
            },
            "required": [
                "fullName",
                "age"
            ]
        },
        "courtProceeding": {
            "type": "object",
            "properties": {
                "nameOfCourt": {
                    "type": "string"
                },
                "caseNumber": {
                    "type": "string"
                },
                "caseTypeAndOtherInfo": {
                    "type": "string"
                }
            },
            "required": [
                "nameOfCourt",
                "caseNumber"
            ]
        },
        "orderType": {
            "type": "string",
            "enum": [
                "nonMolestationOrder",
                "occupationOrder"
            ]
        },
        "preferredContact": {
            "type": "string",
            "enum": [
                "phone",
                "email"
            ]
        },
        "protectedChild": {
            "type": "object",
            "properties": {
                "fullName": {
                    "type": "string"
                },
                "dateOfBirth": {
                    "$ref": "#/definitions/standardDate"
                },
                "relationship": {
                    "type": "string"
                },
                "parentalResponsibility": {
                    "type": "boolean"
                },
                "respondentRelationship": {
                    "type": "string"
                }
            },
            "required": [
                "fullName",
                "dateOfBirth",
                "relationship",
                "parentalResponsibility",
                "respondentRelationship"
            ]
        },
        "relationshipDescription": {
            "type": "string",
            "enum": [
                "marriedOrCivil",
                "formerlyMarriedOrCivil",
                "engagedOrProposed",
                "formerlyEngagedOrProposed",
                "liveTogetherCouple",
                "formerlyLiveTogetherCouple",
                "currentNotLiveTogether",
                "formerNotLiveTogether",
                "noneOfAbove"
            ]
        },
        "relationshipType": {
            "type": "string",
            "enum": [
                "father",
                "mother",
                "son",
                "daughter",
                "brother",
                "sister",
                "grandfather",
                "grandmother",
                "uncle",
                "aunt",
                "nephew",
                "niece",
                "cousin",
                "other"
            ]
        },
        "standardDate": {
            "type": "object",
            "properties": {
                "day": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 31
                },
                "month": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 12
                },
                "year": {
                    "type": "number"
                }
            },
            "required": [
                "day",
                "month",
                "year"
            ]
        },
        "ukAddress": {
            "type": "object",
            "properties": {
                "addressUKLine1": {
                    "type": "string"
                },
                "addressUKLine2": {
                    "type": "string"
                },
                "addressUKLine3": {
                    "type": "string"
                },
                "postTown": {
                    "type": "string"
                },
                "postCode": {
                    "type": "string"
                },
                "county": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                }
            },
            "required": [
                "addressUKLine1",
                "postTown",
                "postCode"
            ]
        },
        "withoutNoticeReason": {
            "type": "string",
            "enum": [
                "riskOfSignificantHarm",
                "deterredFromPursuingApplication",
                "respondentDeliberatelyEvadingService"
            ]
        }
    },
    "properties": {
        "beforeStart": {
            "type": "object",
            "properties": {
                "applicantHowOld": {
                    "$ref": "#/definitions/applicantAgeBracket"
                }
            },
            "required": [
                "applicantHowOld"
            ]
        },
        "situation": {
            "type": "object",
            "properties": {
                "ordersAppliedFor": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/orderType"
                    }
                },
                "ordersAppliedWithoutNotice": {
                    "type": "boolean"
                },
                "ordersAppliedWithoutNoticeReason": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/withoutNoticeReason"
                    }
                },
                "bailConditionsOnRespondent": {
                    "type": "boolean"
                },
                "bailConditionsEndDate": {
                    "$ref": "#/definitions/standardDate"
                },
                "additionalDetailsForCourt": {
                    "type": "string"
                }
            },
            "required": [
                "ordersAppliedFor"
            ],
            "dependentRequired": {
                "ordersAppliedWithoutNotice": ["ordersAppliedWithoutNoticeReason"],
                "bailConditionsOnRespondent": ["bailConditionsEndDate"]
            }
        },
        "applicantDetails": {
            "type": "object",
            "properties": {
                "applicantFirstName": {
                    "type": "string"
                },
                "applicantLastName": {
                    "type": "string"
                },
                "applicantOtherNames": {
                    "type": "string"
                },
                "applicantDateOfBirth": {
                    "$ref": "#/definitions/standardDate"
                },
                "shareContactDetailsWithRespondent": {
                    "type": "boolean"
                },
                "applicantAddress": {
                    "$ref": "#/definitions/ukAddress"
                },
                "applicantPhoneNumber": {
                    "type": "string"
                },
                "applicantEmailAddress": {
                    "type": "string",
                    "format": "email"
                },
                "applicantPreferredContact": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/preferredContact"
                    }
                },
                "applicantContactInstructions": {
                    "type": "string"
                },
                "applicantHasLegalRepresentative": {
                    "type": "boolean"
                },
                "legalRepresentativeName": {
                    "type": "string"
                },
                "legalRepresentativeFirm": {
                    "type": "string"
                },
                "legalRepresentativeAddress": {
                    "$ref": "#/definitions/ukAddress"
                },
                "legalRepresentativeDx": {
                    "type": "string"
                },
                "legalRepresentativePhone": {
                    "type": "string"
                },
                "legalRepresentativeEmail": {
                    "type": "string",
                    "format": "email"
                },
                "legalRepresentativeReference": {
                    "type": "string"
                }
            },
            "required": [
                "applicantFirstName",
                "applicantLastName",
                "applicantDateOfBirth",
                "shareContactDetailsWithRespondent",
                "applicantAddress",
                "applicantHasLegalRepresentative"
            ]
        },
        "respondentDetails": {
            "type": "object",
            "properties": {
                "respondentFirstName": {
                    "type": "string"
                },
                "respondentLastName": {
                    "type": "string"
                },
                "respondentOtherNames": {
                    "type": "string"
                },
                "respondentDateOfBirth": {
                    "$ref": "#/definitions/standardDate"
                },
                "respondentLivesWithApplicant": {
                    "type": "boolean"
                },
                "respondentAddress": {
                    "$ref": "#/definitions/ukAddress"
                },
                "respondentPhoneNumber": {
                    "type": "string"
                },
                "respondentEmailAddress": {
                    "type": "string",
                    "format": "email"
                }
            },
            "required": [
                "respondentFirstName",
                "respondentLastName",
                "respondentLivesWithApplicant",
                "respondentAddress"
            ]
        },
        "relationshipWithRespondent": {
            "type": "object",
            "properties": {
                "relationshipDescription": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/relationshipDescription"
                    }
                },
                "relationshipStartDate": {
                    "$ref": "#/definitions/standardDate"
                },
                "relationshipEndDate": {
                    "$ref": "#/definitions/standardDate"
                },
                "ceremonyDate": {
                    "$ref": "#/definitions/standardDate"
                },
                "relationshipWithRespondent": {
                    "$ref": "#/definitions/relationshipType"
                },
                "relationshipWithRespondentOther": {
                    "type": "string"
                },
                "anyChildren": {
                    "type": "boolean"
                }
            },
            "required": [
                "relationshipDescription",
                "anyChildren"
            ],
            "if": {
                "properties": {
                    "relationshipWithRespondent": {
                        "const": "other"
                    }
                },
                "required": [
                    "relationshipWithRespondent"
                ]
            },
            "then": {
                "required": [
                    "relationshipWithRespondentOther"
                ]
            }
        },
        "family": {
            "type": "object",
            "properties": {
                "whoApplicationIsFor": {
                    "$ref": "#/definitions/applicationCover"
                },
                "protectedChildren": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/protectedChild"
                    }
                },
                "anyOngoingCourtProceedings": {
                    "type": "boolean"
                },
                "ongoingCourtProceedings": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/courtProceeding"
                    }
                }
            },
            "required": [
                "whoApplicationIsFor",
                "anyOngoingCourtProceedings"
            ]
        },
        "respondentBehaviour": {
            "type": "object",
            "properties": {
                "applyingForMonMolestationOrder": {
                    "type": "boolean"
                },
                "stopBehaviourTowardsApplicant": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/behaviourTowardsApplicant"
                    }
                },
                "stopBehaviourTowardsChildren": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/behaviourTowardsChildren"
                    }
                },
                "stopBehaviourAnythingElse": {
                    "type": "string"
                }
            },
            "required": [
                "applyingForMonMolestationOrder"
            ]
        },
        "home": {
            "type": "object",
            "properties": {
                "applyingForOccupationOrder": {
                    "type": "boolean"
                },
                "occupationOrderAddress": {
                    "$ref": "#/definitions/ukAddress"
                }
            },
            "required": [
                "applyingForOccupationOrder"
            ]
        }
    },
    "required": [
        "beforeStart",
        "situation",
        "applicantDetails",
        "respondentDetails",
        "relationshipWithRespondent",
        "family",
        "respondentBehaviour",
        "home"
    ]
}
